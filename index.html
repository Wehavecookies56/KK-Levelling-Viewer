<html>
	<head>
		<style>
			body{
				background-color:#202124;
				color:#FFFFFF;
			}
			table {
				margin: auto;
				width: 50%;
				padding: 10px;
			}
		</style>
		
	</head>
	<body>
		<input type="file" id="file-selector" multiple>
		<table id="output">
			
		</table>
		<script>
		
			function writeStat(stat,tr){
				if(stat) {
					let plus = true;
					const td = tr.insertCell();
					if(stat <0){
						td.style.color = "red"
						plus = false;
					}
					td.appendChild(document.createTextNode((plus ? "+" : "")+stat))
				} else {
					const td = tr.insertCell();
					td.style.color = "#888"
					td.appendChild(document.createTextNode("N/A"))
				}
			}
			
			function writeStatArray(stat,tr){
				if(stat) {
				    const td = tr.insertCell();
					if(stat <0){
						td.style.color = "red"
						plus = false;
					}
					td.appendChild(document.createTextNode(stat))
				} else {
					const td = tr.insertCell();
					td.style.color = "#888"
					td.appendChild(document.createTextNode("N/A"))
				}
			}
			
			const fileSelector = document.getElementById('file-selector');
			fileSelector.addEventListener('change', (event) => {
				table = document.getElementById('output');
				table.border = 1;
				table.innerHTML = "";
				const files = event.target.files;
				console.log(files[0].name)
				var fr = new FileReader();
				fr.onload=function(){
					const obj = JSON.parse(fr.result);
						const firstHeader = table.insertRow();
						nameCell = firstHeader.insertCell();
						nameCell.appendChild(document.createTextNode(files[0].name))
						nameCell.colSpan = 9;
						nameCell.style = "font-size:36px; text-align:center;";
						const header = table.insertRow();
						header.insertCell().appendChild(document.createTextNode("Level"))
						header.insertCell().appendChild(document.createTextNode("Strength"))
						header.insertCell().appendChild(document.createTextNode("Magic"))
						header.insertCell().appendChild(document.createTextNode("Defense"))
						header.insertCell().appendChild(document.createTextNode("AP"))
						header.insertCell().appendChild(document.createTextNode("Max HP"))
						header.insertCell().appendChild(document.createTextNode("Max MP"))
						header.insertCell().appendChild(document.createTextNode("Abilities"))
						header.insertCell().appendChild(document.createTextNode("Shotlocks"))

					for (let i = 0; i <= 100; i++) {
						const tr = table.insertRow();
						let level = obj[i];
						const td = tr.insertCell();
						td.appendChild(document.createTextNode(i))

						writeStat(level.str,tr)
						writeStat(level.mag,tr)
						writeStat(level.def,tr)
						writeStat(level.ap,tr)
						writeStat(level.maxhp,tr)
						writeStat(level.maxmp,tr)
						writeStatArray(level.abilities,tr)
						writeStatArray(level.shotlocks,tr)
					}
					
				}
				
				fr.readAsText(files[0]);
			  });
		</script>
	</body>
</html>
